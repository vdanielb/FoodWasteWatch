<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>U.S. Food-Waste Prototype</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <script defer src="https://d3js.org/d3.v7.min.js"></script>
  <script defer src="https://unpkg.com/topojson-client@3"></script>
  <script defer src="scrollytelling.js"></script>
  <script defer src="main.js"></script>
  <style>
    #scrolly-foodwaste {
      max-width: 800px;
      margin: 24px auto 0 auto;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 200vh; /* Increased to provide scrolling space */
    }
    #scrolly-foodwaste .sticky-container {
      position: relative;
    }
    #scrolly-foodwaste .sticky-content {
      position: relative; /* Changed from sticky to relative for normal flow */
    }
    .scrolly-step {
      background: #fff;
      border-radius: 12px;
      padding: 14px 8px 10px 8px;
      margin: 0 auto 3rem auto; /* Increased spacing between cards */
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      text-align: center;
      width: 100%;
      max-width: 700px;
      height: 260px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0.2; /* Start very faded */
      transform: translateY(50px) scale(0.95); /* Start moved down and smaller */
      transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1); /* Smooth easing */
    }
    .scrolly-step.scrolly-year {
      height: 440px;
    }
    .scrolly-step.active {
      opacity: 1; /* Fully visible when active */
      transform: translateY(0) scale(1.05); /* Move up and slightly larger */
      box-shadow: 0 8px 25px rgba(0,0,0,0.15); /* Enhanced shadow */
    }
    .scrolly-step.active h2 {
      animation: textPop 0.6s ease-out forwards;
    }
    .scrolly-step.active .fw-visual {
      animation: visualSlideIn 0.8s ease-out 0.2s forwards;
    }
    .scrolly-step h2 {
      font-size: 1.2em;
      margin-bottom: 8px;
      font-weight: 700;
      transform: translateY(20px);
      opacity: 0.7;
      transition: all 0.4s ease;
    }
    .fw-visual {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      transform: translateY(30px);
      opacity: 0.5;
    }
    .fw-visual svg {
      max-height: 260px;
      display: block;
      margin: 0 auto;
    }
    
    /* Animations */
    @keyframes textPop {
      0% {
        transform: translateY(20px) scale(0.9);
        opacity: 0.7;
      }
      50% {
        transform: translateY(-5px) scale(1.05);
        opacity: 1;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    @keyframes visualSlideIn {
      0% {
        transform: translateY(30px) scale(0.9);
        opacity: 0.5;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    /* Enhanced text highlighting */
    .scrolly-step.active .fw-day,
    .scrolly-step.active .fw-month,
    .scrolly-step.active .fw-year {
      animation: numberGlow 1s ease-out 0.3s forwards;
      display: inline-block;
    }
    
    @keyframes numberGlow {
      0% {
        color: inherit;
        transform: scale(1);
      }
      50% {
        color: #e74c3c;
        transform: scale(1.15);
        text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
      }
      100% {
        color: #c0392b;
        transform: scale(1.1);
        font-weight: 900;
        text-shadow: 0 0 5px rgba(192, 57, 43, 0.3);
      }
    }
  </style>
</head>

<body>
  <div class="newspaper-header">
    <h1>The Antiko Times</h1>
  </div>
  <header>
    <img src="images/food waste.webp" alt="Food Waste Visualization" class="header-image">
    <h1>Food Waste in the United States</h1>
    <h2 class="subtitle">A Visual Exploration of America's Food Waste Crisis</h2>
    <div class="scroll-indicator">
      <span>Scroll to explore</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12l7 7 7-7"/>
      </svg>
    </div>
    <div id="food-waste-animation" style="width:100%; display:flex; justify-content:center; margin: 30px 0;"></div>
  </header>

  <section id="scrolly-foodwaste" class="scrollytelling">
    <div class="scrolly-step step" id="scrolly-day" data-step="intro-1">
      <h2>The average American wastes about <span class="fw-day">XX</span> lbs of food per day.</h2>
      <div class="fw-visual" id="fw-visual-day"></div>
    </div>
    <div class="scrolly-step step" id="scrolly-month" data-step="intro-2">
      <h2>In a month, that's <span class="fw-month">XX</span> lbs of food wasted.</h2>
      <div class="fw-visual" id="fw-visual-month"></div>
    </div>
    <div class="scrolly-step step scrolly-year" id="scrolly-year" data-step="intro-3">
      <h2>Over a year, over <span class="fw-year">XX</span> lbs of food waste is compiled.</h2>
      <div class="fw-visual" id="fw-visual-year"></div>
    </div>
  </section>

  <div class="map-container">
    <button id="resetView" class="reset-button">Reset View</button>
    <div id="map" style="width:100%; height:500px;"></div>
  </div>

  <!-- Intro scrollytelling steps moved below the map -->
  <section class="scrollytelling">
    <div class="sticky-container">
      <div class="sticky-content">
        <!-- Step 1 — national tonnage -->
        <div class="step" data-step="1">
          <h2>Every year, Americans waste <span class="stat" id="stat-tons">75&nbsp;million&nbsp;tons</span> of food.</h2>
          <p class="sub">That's roughly 40 % of everything produced for the table.</p>
          <div class="animation-container" id="waste-animation-1"></div>
        </div>
        <!-- Step 2 — skyline comparison -->
        <div class="step" data-step="2">
          <h2>Stack it up and you could fill the Empire State Building <span class="stat" id="stat-esb">450</span> times.</h2>
          <p class="sub">Picture New York's iconic tower overflowing with leftovers—<em>every three days</em>.</p>
          <div class="animation-container" id="waste-animation-2"></div>
        </div>
        <!-- Step 3 — household dollars -->
        <div class="step" data-step="3">
          <h2>The lost food is worth <span class="stat" id="stat-value">$440&nbsp;billion</span>.</h2>
          <p class="sub">For the average family, that's <span class="stat" id="stat-household">$1,400</span> vanishing from the grocery budget each year.</p>
          <div class="animation-container" id="waste-animation-3"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Scrollytelling section -->
  <!-- TODO: Tristan -->
  <section class="scrollytelling">
    <div class="sticky-container">
      <div class="sticky-content">
        <!-- Step 4 — climate impact -->
        <div class="step" data-step="4">
          <h2>As it rots, wasted food emits as much CO₂e as <span class="stat" id="stat-cars">58&nbsp;million</span> cars.</h2>
          <p class="sub">That's every car in Texas <strong>and</strong> California combined.</p>
          <div class="animation-container" id="waste-animation-4"></div>
        </div>
  
        <!-- Step 5 — water footprint -->
        <div class="step" data-step="5">
          <h2>Growing that uneaten food guzzles <span class="stat" id="stat-water">21&nbsp;trillion</span> gallons of water.</h2>
          <p class="sub">Enough to fill <span class="stat" id="stat-pools">2.3&nbsp;million</span> Olympic swimming pools.</p>
          <div class="animation-container" id="waste-animation-5"></div>
        </div>
  
        <!-- Step 6 — land footprint -->
        <div class="step" data-step="6">
          <h2>It also ties up <span class="stat" id="stat-land">56&nbsp;million</span> acres of farmland.</h2>
          <p class="sub">That's an area larger than the state of <strong>Wisconsin</strong>.</p>
          <div class="animation-container" id="waste-animation-6"></div>
        </div>
  
        <!-- Step 7 — hunger offset -->
        <div class="step" data-step="7">
          <h2>Rescuing even <strong>just 10 %</strong> of wasted food could feed <span class="stat" id="stat-people">13&nbsp;million</span> Americans facing hunger.</h2>
          <div class="animation-container" id="waste-animation-7"></div>
        </div>
  
        <!-- Step 8 — personal savings -->
        <div class="step" data-step="8">
          <h2>Keeping half your leftovers each week could keep <span class="stat" id="stat-personal">$700</span> in your wallet every year.</h2>
          <p class="sub">That's two months of average utility bills.</p>
          <div class="animation-container" id="waste-animation-8"></div>
        </div>
  
        <!-- Step 9 — methane cut via compost -->
        <div class="step" data-step="9">
          <h2>Composting the scraps instead of landfilling them can slash methane by <span class="stat" id="stat-methane">34 %</span>.</h2>
          <div class="animation-container" id="waste-animation-9"></div>
        </div>
  
        <!-- Step 10 — job creation -->
        <div class="step" data-step="10">
          <h2>Food-recovery programs could create <span class="stat" id="stat-jobs">51,000</span> new U.S. jobs.</h2>
          <p class="sub">That's equivalent to the entire craft-brewing industry workforce.</p>
          <div class="animation-container" id="waste-animation-10"></div>
        </div>
  
      </div>
    </div>
  </section>

  <!-- Solutions and Conclusions section -->
  <!-- TODO: Clayton -->




  <section class="notes">
    <h2>Writeup</h2>
    <p> <br><b>What have you done so far? </b><br>

    <br> So far, we've created the main visualization for the project, which is a map that displays how much waste is generated across different states in the USA. We have hover and tooltips implemented in our map, but we intend to add more interactive features such as being able to click on a specific state to view the breakdown of waste based on sector. <br>
    
    <br> We've also set up a GitHub repository and deployed the webpage, so it's already accessible online. In addition, we plan to create a second visualization to complement the map, which takes a scrollytelling format, to put into perspective how much waste each person, household, city, etc is generating, on average. <br>
    
    <br><b> What will be the most challenging of your project to design and why? </b><br>
    
    <br> The most challenging aspect will likely be designing and implementing the animations for the scrollytelling section, which requires good technical execution and also creativity in how we present the data in a meaningful and relatable way. We need to create a compelling narrative that clearly communicates the main insights while still being easy to understand. Then, we aim to add more interactive elements to keep the webpage engaging and informative for users. <br> 
    
    <br> Lastly, it will also be a challenge to improve the performance of our visualization to make it more seamless. <br></p>
    
    <h2>Data</h2>
    <p>ReFED U.S. State Food Surplus Summary, 2010-2023.</p>
  </section>

</body>
</html>
